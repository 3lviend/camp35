- content_for :header do
  %h1= "Your entries for #{@day.to_date == Date.today ? 'today' : @day.to_date.to_formatted_s(:long_ordinal)}"
  - total_duration = @entries.map(&:total_duration).inject(Time.parse("00:00:00")) { |d,s| s += d.hour.hours; s += d.min.minutes; s  }
  %h4= "Total of #{total_duration.hour}h #{total_duration.min}m"

%table{ :cellspacing => 0}
  %thead
    %th Work chart
    %th Time
    %th Description
    %th
  %tbody
    - if @entries.count == 0
      %tr
        %td{:colspan => 3, :style => "text-align: center"} No entries yet!
    - @entries.each do |entry|
      %tr
        %td
          = entry.work_chart_label_parts.first
          - entry.work_chart_label_parts[1..-2].each do |part|
            %br
            = "→ #{part}"
          %br 
          →
          %b= entry.work_chart_label_parts.last
        %td
          - total = entry.total_duration
          = "#{total.hour}h #{total.min}m"
        %td= BlueCloth.new(entry.description).to_html.html_safe
        %td
          = link_to "Edit",   edit_work_entry_path(@day.year, @day.month, @day.day, entry.id)
          %br
          = link_to "Delete", work_entry_path(@day.year, @day.month, @day.day, entry.id), :method => :delete, :confirm => "Are you sure you want to delete this entry?", :class => "remove"
.actions
  = link_to "New entry", new_work_entry_path, :class => "button"
